apiVersion: ydb.tech/v1alpha1
kind: Database
metadata:
  name: stroppy-ydb-database
spec:
  image:
    name: cr.yandex/crptqonuodf51kdj7a7d/ydb:22.4.44
  nodes: 1
  domain: root
  resources:
    storageUnits:
      - count: 1
        unitKind: ssd
  storageClusterRef:
    name: stroppy-ydb-storage
    namespace: stroppy
  nodeSelector:
    dbms-worker: "true"
  affinity:
    podAntiAffinity:
      requiredDuringSchedulingIgnoredDuringExecution:
        - labelSelector:
            matchExpressions:
              - key: dbms-worker
                operator: In
                values:
                  - "true"
          topologyKey: "kubernetes.io/hostname"
